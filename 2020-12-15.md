# ASP



**ASP란?**

: Active Server Pages의 약자 동적으로 서버에서 작동하는 페이지 ↔ HTML

: 서버사이드 스크립트(ASP) ↔ 클라이언트 사이드 스크립트 (JavaScript)

: 서버 스크립트를 구분하는 구분자는 <%와 %>, 이 사이에사용된 스크립트는 서버에서 실행 

  → 브라우저에서 HTML 보기를 해도 ASP 코드 내용은 보이지 않는다.

: 서버에서 실행되고 그 결과만을 가져다 보여주기 때문에 HTML 소스에는 그 결과값만 보인다



**작동원리**

: 웹사이트 이용자가 어떠한 ASP페이지에 접속하면 이 ASP페이지는 ASP.DLL을 거처 해석된 다음 HTML 태그로 바뀌어짐. 그럼 웹 브라우저가 이 HTML을 해석하여 화면에 보여주는것.

![img](http://www.taeyo.net/Lecture/Dukyoung/images/sample03.gif)





**ASP 사용 이유**

- 사용자와의 동적인 상호작용

HTML은 기본적으로 정보를 보여주기만 한다.(정적)

하이퍼링크를 통해 사용자가 요청을 하면 웹 서버가 그 요청에 응답하여 원하는 웹 페이지를 보여주는 방식으로 작업이 진행되기 때문.

이것도 일종의 상호작용으로 할 수 있겠으나 웹 서버를 운영하는 사람과 사용자가 서로 어떤 정보를 주고 받는다든지 아니면 사용자들간에 서로 정보를 주고 받는다든지 하는 일은 기본적으로 불가능함. ASP는 HTML로 불가능한 이런 일들을 가능하게 해줌.

 

- 서버측 자원을 사용해야 하는 경우

사용자로부터 어떤 내용을 입력받아 데이터베이스에 저장해야 할 경우와 같은 건데 이럴 경우는 반드시 ASP를 사용해야한다. 예를 들어 게시판 작성, 파일 업로드, ID인증 등과 같이 서버에 어떤 정보를 저장하거나 저장된 정보를 이용해 일을 하는 경우에는 ASP를 사용해야함.

왜냐하면 HTML은 원칙적으로 클라이언트에서 번역되는 문서이기 때문에 서버의 다른 자원에 접근 할 수가 없기 때문

 

- 스크립트의 안정적인 실행을 위해서

자바스크립트를 예를들면 버전은 점점 더 높아진다. 그러다보면 상위 버전의 자바스크립트를 삽입한 HTML 문서가 어떤 웹 브라우저에서는 의도하는대로 번역이 되지 않는 사태가 벌어질 수도 있음. 이럴 경우 서버에서 실행되는 스크립트라면 서버에서 HTML형태로 번역된 후 넘겨지게 되니깐 어떤 웹 브라우저에서라도 잘못될 염려가 없을 것

 

- 스트립트 소스를 감추기 위해서

클라이언트측 스크립트들은 HTML 속에 포함되어 서버에서 클라이언트로 전송된 다음 클라이언트의 웹 브라우저에서 번역됨. 따라서 사용자들은 소스보기를 통해 스크립트의 내용을 볼 수가 있음.

그러나 서버측 스크립트를 사용함으로써 개발자는 자신의 독특한 알고리즘을 감출 수가 있음. 



# IIS

**IIS란?**

: Internet Information Services의 약자, 마이크로소프트 윈도우를 사용하는 서버들을 위한 인터넷 기반 서비스들의 모임(윈도우 서버와의 호환성이 좋으며 웹 프로그래밍 언어 및 기술로 ASP와 ASP.NET이 주력)

: 아파치 웹서버에 이어 세계에서 두번째로 가장 잘 알려진 웹서버

: 윈도우 OS에서만 사용이 가능하다는점 

:일반적인 HTTP 지원, SMTP 메일 전송 프로토콜 지원, FTP 파일 전송 프로토콜 지원



# SSL 및 TLS

**SSL (Secure Socket Layer) 및 TLS (Transport Layer Security)**

- 전송계층 상에서 클라이언트,서버에 대한 인증 및 데이터 암호화 수행
     - 클라이언트와 서버 양단 간 응용계층 및 TCP 전송계층 사이에서 안전한 보안 채널을
       형성해 주는 역할을 수행하는 보안용 프로토콜

- 주요 응용
     - HTTP (HTTPS), FTP (FTPS), TELNET, SMTP, SIP, POP, IMAP 등 에서 사용 가능
        주로, 웹 브라우저와 웹 서버 사이의 안전한 보안 채널을 제공하기 위해 많이 사용됨
- 오픈 소스 구현 例) OpenSSL 



**SSL/TLS의 특징**

-  클라이언트/서버 기반의 프로토콜
- 응용 프로그램(어플리케이션) 자체 구현 가능
     - 대부분의 다른 보안 프로토콜(EAP,IPsec 등)은 운영체제 등에 밀접하게 관련됨
-  계층 위치
  - 응용계층 및 전송계층 사이에 위치하나, 전송계층과 보다 밀접하게 동작함
  - 소켓 지향적인 프로토콜
-  운반용 프로토콜 및 포트번호
  - 운반용 프로토콜 : TCP/UDP
        . 한편, UDP 상에서도 가능한 버젼은, 
           .. DTLS (Datagram Transport Layer Security) RFC 6347(2012년)가 있음
  - 사용 포트 : 응용 마다 다름
            . HTTPS의 경우에, HTTP를 위한 SSL/TLS 보안 터널 형성을 위해, 포트번호 443 를 사용
- 인증 구조  :  X.509
  - X.509에서 규정된 공개키 인증서 교환에 의해 상대방에 대한 인증 수행
-  키 교환 방식  :  (협상 선택 가능)
  - Null, RSA 공개 키 교환, Anonymous Diffie-Hellman 키 교환, 
        Ephermeral Diffie-Hellman 키 교환, Fixed Diffie-Hellman 키 교환, Fortezza
- 대칭키 암호화 방식  :  (협상 선택 가능) 
  - RC2 (40), RC4 (40), RC4 (128), DES, Triple DES, IDEA 등
- 해쉬 알고리즘  :  (협상 선택 가능)
  - Null, MD5, SHA-1



**SSL/TLS의 주요 기능**

- 상호 인증

  - 공개키 인증서를 이용하여 서버, 클라이언트의 상호 인증
  - 즉, 클라이언트/서버 두 응용 간에 상대방에 대한 인증

- 메세지 인증 (메세지 무결성)

  - 메세지 인증 코드 HMAC에 의한 메세지 무결성 제공(HMAC MD5, HMAC SHA-1 등)

- 메세지 압축

  - 디폴트는 Null (즉, 무 압축)

    (압축 알고리즘은 미리 정해지지 않고 협상으로 지정 가능)

- 암호화용 세션 키 생성(대칭 키 합의)을 위한 키 교환

  - RSA : 두 키 (공개 키 및 개인 키)가 하나의 수 체계를 형성(서버 공개 키 사용)
  - Diffie-Hellman : Diffie-Hellman 프로토콜을 기반으로 한 키 교환 방식

- 생성된 공유 비밀키에 의해 암호화된 종단간 안전한 연결 통로 제공

  - 스트림 암호화 : 40, 128 비트의 RC4
  - 블록 암호화 : IDEA, 40,56 비트의 DES, 168 비트의 3DES 등



**SSL/TLS의 프로토콜 스택**

- 전송계층  TCP 위에서,  '보안 소켓/보안 채널/터널'을 구성

  ![img](http://www.ktword.co.kr/img_data/1957_1.JPG)

  - 응용계층에서 생성된 데이터에 대한 보안(인증, 무결성, 기밀성), 압축 등의 서비스 제공

  ※ SSL/TLS의 상세 프로토콜 스택 : 크게, 하위 레코드 프로토콜(단편화, 압축, 무결성, 암호화, 인증 기능 제공)과 상위 핸드세이크 관련 프로토콜들로 구성



**SSL/TLS 핸드세이크**

- 초기 협상 단계
  - 클라이언트,서버 간에 Client Hello,Server Hello 메세지 교환
  - 클라이언트가 서버에게 Cipher Suite(사용 가능 암호화,해싱 방식 등)을 보내고
           서버 인증서를 요구

- 인증 단계
  - 서버에서 공개키,서버명,인증기관 주소 등을 포함한 인증서를 클라이언트에게 전송
  - 이때, 서버는 클라이언트가 제시한 것 중 자신이 선택한 암호화 방식 및 인증서를 보냄
  - 필요시 클라이언트는, 인증서를 발급한 인증기관 서버에 접속하여 서버 인증서의 유효성 확인

- 보안 채널 형성
  - 클라이언트는 보안 채널 형성에 필요한 세션키를 만들기 위해,
  - 서버의 공개키를 이용하여 임의의 수(Pre Master Key)를 암호화시켜 서버에게 전송하고,
  - 서버는 자신의 비밀키(개인키)로 이를 해독(역암호화)하게 됨
  - 이때 임의의 수(Pre Master Key)로부터 Master Key를 유도하고,
  - 이 Master Key로부터 양측은 암호화,복호화에 필요한 세션키를 생성함

- 상호 암호화 통신 시작즉, 보안성이 확립된 TLS 터널 내에서 상호 통신
  - 즉, 보안성이 확립된 TLS 터널 내에서 상호 통신





SSL과 TLS는 사용장좌 웹 브라우저 간 통신을 암호화하는데 사용하는 프로토콜

공개 키와 개인키를 교환하여 보안 세션을 생성한 후 통신을 암호화

TLS는  SSL에서 개선된 신규 모델 프로토콜

전자 상거래가 활발해지며 웹 보안이 매우 중요해지고 있기에 개인정보보호 의무조치에의해 

개인정보 전송구간에 보안서버를 적용하도록 하고 있습니다.



# SSL

**SSL**(Secure Sockets Layer) 

: Netscape 사에서 개발





# TLS

**TLS**(Transport Layer Security)

: IETF 사에서 개발



